<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <base href="http://www.simple-admin.org/">
    <link rel="stylesheet" type="text/css" href="css/stylesheet.css">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Chivo:900">
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/3.0.0/css/font-awesome.min.css">
    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="favicon.ico">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta property="og:url" content="http://www.simple-admin.org/simple-backup-files.html">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="simple-admin.org">
    <title>simple-backup-files | Simple-Admin for Ubuntu</title>
    <meta property="og:title" content="simple-backup-files | Simple-Admin for Ubuntu">
    <meta property="og:description" content="Command-line tools for simplified server administration">
    <meta property="og:image" content="http://www.simple-admin.org/favicon.png">
    <meta property="fb:admins" content="627548736">
  </head>

  <body>
    <div class="container">
      <div class="inner">

        <header>
          <h1>Simple-Admin <span>for Ubuntu</span></h1>
          <h2>Command-line tools for simplified server administration</h2>
        </header>

        <section class="links clearfix">
          <a href="index.html" class="button back"><span>Start Page</span></a>
        </section>

        <hr>

        <section class="main">

<h2>simple-backup-files</h2>

<p>Performs a file system backup for configured directories.</p>

<h3>Usage:</h3>

<blockquote>
<code>simple-backup-files [-v]</code>
</blockquote>

<table>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
<tr>
<td>-v</td>
<td>Print verbose output.</td>
</tr>
</table>

<p>Performs a file system backup with <code>rsync</code> of the directories
listed in <code>/etc/simple-backup-files.conf</code>. All the files will be
recursively copied to a new directory
<code>/backup/&lt;hostname&gt;/files/&lt;timestamp&gt;</code>. A symbolic link
<code>/backup/&lt;hostname&gt;/files/latest</code> always points to the last
complete backup.</p>

<p>The first backup every day and every month have a different timestamp format
(omitting hours and minutes). The monthly backup directories are kept
indefinitely, but daily backups are only preserved for 30 days. Other
timestamped backup directories are preserved for 48 hours.</p>

<p>In order to save space, identical files are hard linked between the current
and the previous backup directory. The directory structure itself cannot be
hard linked however, so each backup will require some disk usage. Backups of
large number of files and directories will require many MBs of disk space even
if all files remain unmodified.</p>

<p>The backup can be run as frequently as every minute, but should probably be
run once per day to keep disk usage down.</p>

<h3>Configuration:</h3>

<p>The backup is configured in <code>/etc/simple-backup-files.conf</code> with
one line per directory. Comment or blank lines are ignored. Each line contains
a directory path and an optional number retention days:</p>

<pre><code>/etc
/home
/root
/var/log   5</code></pre>

<p>The optional retention days specifies the maximum number of days to keep the
files from that directory. This value only reduces the default file retention
(as specified above).</p>

<h3>See Also:</h3>

<ul>
  <li><code>/etc/simple-backup-files.conf</code></li>
  <li><code>/backup</code></li>
  <li><a href="simple-backup-status.html">simple-backup-status</a></li>
  <li><a href="http://manpages.ubuntu.com/manpages/man1/rsync.1.html">rsync</a></li>
</ul>

        </section>

        <footer>
          Simple-Admin for Ubuntu is maintained by <a href="https://github.com/cederberg">Per Cederberg</a><br>
          This page was adapted from
          <a href="http://pages.github.com">GitHub Pages</a> with tactile theme
          by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

      </div>
    </div>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-7324321-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>
