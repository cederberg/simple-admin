{"tagline":"Server Administration Scripts","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Admin-Scripts for Ubuntu","google":"","body":"admin-scripts\r\n=============\r\nScripts for simplified Ubuntu server administration and\r\nmaintenance.\r\n\r\n\r\nRequirements\r\n------------\r\n* Ubuntu 12.04\r\n* rsync\r\n* lzma\r\n* Perl\r\n* Perl - Geo::IPfree\r\n* Perl - JSON::XS\r\n\r\n\r\nInstallation\r\n------------\r\n1. Install dependencies:\r\n   - ```apt-get install rsync```\r\n   - ```apt-get install lzma```\r\n   - ```apt-get install libgeo-ipfree-perl```\r\n   - ```apt-get install libjson-xs-perl```\r\n2. Copy binaries into place:\r\n   - ```cp bin/admin-* /usr/local/bin/```\r\n3. Copy & modify config files.\r\n\r\n\r\nadmin-backup-files\r\n------------------\r\nPerforms a filesystem backup for configured directories.\r\n\r\n**Syntax:** admin-backup-files [-v]\r\n\r\nOption | Description\r\n-------|-------------------------------------------------\r\n-v     | Print verbose output.\r\n\r\nConfigured in ```/etc/admin-backup-files.conf``` with one line\r\nper directory to backup:\r\n\r\n```\r\n/etc\r\n/home\r\n/root\r\n```\r\n\r\nAll the files in the directories specified will be recursively\r\ncopied to ```/backup/<hostname>/current/```, which serves as a\r\nsnapshot backup directory. Previous (replaced) versions of files\r\nare kept in the ```/backup/<hostname>/history/``` directory.\r\n\r\nSeparate history directories per minute, day and month are\r\nmaintained. The minute history is only preserved for 24 hours\r\nand a single new directory is created per backup run. The daily\r\nhistory is preserved for 30 days and thereafter only the monthly\r\nhistory is kept.\r\n\r\nThe files are hard linked between the various history directories\r\nto preserve space. The file backup can be run as frequently as\r\nevery minute, but should be run at least once per day.\r\n\r\n\r\nadmin-backup-mysql\r\n------------------\r\nPerforms a MySQL dump of configured databases.\r\n\r\n**Syntax:** admin-backup-mysql [-v]\r\n\r\nOption | Description\r\n-------|-------------------------------------------------\r\n-v     | Print verbose output.\r\n\r\nConfigured in ```/etc/admin-backup-mysql.conf``` with one line\r\nper database to backup:\r\n\r\n```\r\ndatabase1 user password\r\ndatabase2 user password --ignore-table=table1\r\n```\r\n\r\nThe ```/backup/<hostname>/mysql/``` directory is used to\r\nstore the output MySQL dump files (compressed). Backup files are\r\nkept for 30 days, except the first backup file from each month\r\n(which is kept indefinitely).\r\n\r\nThe MySQL backup should be run once per day. More frequent runs\r\nwill overwrite the previous backup.\r\n\r\n\r\nadmin-backup-sync\r\n-----------------\r\nPerforms a remote file sync for configured directories.\r\n\r\n**Syntax:** admin-backup-sync [-v]\r\n\r\nOption | Description\r\n-------|-------------------------------------------------\r\n-v     | Print verbose output.\r\n\r\nConfigured in ```/etc/admin-backup-sync.conf``` with one line\r\nfor each pair of source and destination directories:\r\n\r\n```\r\n/backup/host01 root@host02:/backup/\r\nroot@host02:/backup/host02 /backup/\r\n```\r\n\r\nThe file syncronization use ```rsync``` and will update and\r\nremove files on the receiving side, so be careful to sync the\r\ncorrect backup subdirectories.\r\n\r\n\r\nadmin-freemem\r\n-------------\r\nCleans filesystem cache (if possible) to recover memory.\r\n\r\n**Syntax:** admin-freemem\r\n\r\nForces a filesystem sync followed by a write\r\nto ```/proc/sys/vm/drop_caches```.\r\n\r\n\r\nadmin-status\r\n------------\r\nChecks the status of a number of services on the machine.\r\n\r\n**Syntax:** ```admin-status```\r\n\r\nConfigured in ```/etc/admin-status.conf``` with one line\r\nper service (and PID file):\r\n\r\n```\r\ncron    /var/run/crond.pid\r\nsshd    /var/run/sshd.pid\r\n```\r\n\r\n\r\nadmin-uptodate\r\n--------------\r\nRuns a check to determine if the system requires updates.\r\n\r\n**Syntax:** ```admin-uptodate [-s] [-m]```  \r\n\r\nOption | Description\r\n-------|-------------------------------------------------\r\n-s     | Check only for security updates.\r\n-m     | Mail root instead of printing results.\r\n\r\n\r\nadmin-utf8\r\n----------\r\nConverts a file or directory to UTF-8 (from ISO-8859-1). Only if needed.\r\n\r\n**Syntax:** ```admin-utf8 (check|convert) <file or dir>```\r\n\r\nUse either ```check``` to detect file encoding, or ```convert``` to\r\nconvert all ISO-8859-1 file(s).\r\n"}